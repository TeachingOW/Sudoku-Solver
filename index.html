<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Sudoku Reader</title>
<style>
body { font-family: Arial, sans-serif; text-align: center; background: #f8f8f8; }
h2 { margin: 20px; }
table { border-collapse: collapse; margin: auto; box-shadow: 0 0 15px rgba(0,0,0,0.3);}
td { width: 50px; height: 50px; text-align: center; font-size: 22px; border: 1px solid #888; }
td.block-right { border-right: 3px solid #000; }
td.block-bottom { border-bottom: 3px solid #000; }
</style>
</head>
<body>
<h2>Sudoku Board</h2>
<table id="grid"></table>
<script>
const ROWS=9,COLS=9;
const gridEl=document.getElementById("grid");
const cells=[];

// Build 9x9 table with 3x3 subgrid lines
for(let r=0;r<ROWS;r++){
    const tr=document.createElement("tr");
    const rowCells=[];
    for(let c=0;c<COLS;c++){
        const td=document.createElement("td");
        if((c+1)%3===0 && c<8) td.classList.add("block-right");
        if((r+1)%3===0 && r<8) td.classList.add("block-bottom");
        tr.appendChild(td);
        rowCells.push(td);
    }
    gridEl.appendChild(tr);
    cells.push(rowCells);
}

// Connect WebSocket
const ws=new WebSocket("ws://localhost:6789");
ws.onmessage=(e)=>{
    const msg=e.data.trim();
    console.log("Received:",msg);

    // Parse format: (row, col, val, color)
    const m=msg.match(/\((\d+),\s*(\d+),\s*(\d+),\s*([^)]+)\)/);
    if(!m) return;
    const r=parseInt(m[1]), c=parseInt(m[2]), v=parseInt(m[3]), color=m[4];

    const cell=cells[r][c];
    cell.textContent=(v===0?"":v);
    cell.style.background=color;
};
</script>
</body>
</html>
